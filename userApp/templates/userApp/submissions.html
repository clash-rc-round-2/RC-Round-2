{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Submissions Page</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Gothic+A1&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/sub2.css' %}">
</head>
<style>
        body{
            background-image: url("{% static 'img/alt1.jpg' %}");
            background-repeat: no-repeat;
            background-size: 100%;
            font-family: 'Biryani', sans-serif;
            color: #d7e9f8;
            overflow: hidden;
        }
</style>
    <body>
        <div class="container-fluid">
            <div class="row" style="background-color: #000">
                <div class="col-lg-5" style="height: 7vh;display: flex; justify-content: center;align-items: center;">
                    <div class="col-lg-3" style=" height: 7vh;">
                        <img src="{% static 'img/RC.jpg' %}" style="width: 6vw; height:7vh; display:flex;align-items: center;justify-content: center;color:#ffffff;">
                    </div>
                    <div class="col-lg-9" style="padding-top: 1vh;height: 6vh; display: flex; align-items: center; justify-content: center; color:#ffffff;"><h5>SUBMISSIONS PAGE</h5></div>
                </div>
                <div class="col-lg-2" style=" height: 7vh; display: flex; justify-content: center;align-items: center;color:#ffffff;">
                  <!--Timer added -->
                           <div class="col-lg-4" id="hour" style="font-size: 4vh; border-right: 1px solid white"></div>
                            <div class="col-lg-4" id="min" style="font-size: 4vh; border-right: 1px solid white"></div>
                           <div class="col-lg-4" id="sec" style="font-size: 4vh; "></div>
            </div>
                <div class="col-lg-5" style=" height: 7vh;">
                    <div class="row">
                        <div class="col-lg-3 mt-1" style=" height: 6vh; display: flex; justify-content: center;align-items: center;">
                            <button class="btn btn-block" type="button" onclick="location.href='{% url 'questionHub' %}'" style="background-color: rgba(52, 162, 196, 0.65); color:#ffffff;font-size: 15px; padding-left: 0; padding-right: 0;">Question Hub</button>
                        </div>
                        <div class="col-lg-3 mt-1" style=" height: 6vh; display: flex; justify-content: center;align-items: center;">
                            <button class="btn btn-block" type="button" onclick="location.href='{% url 'leader' %}'" style="background-color: rgba(52, 162, 196, 0.65); color:#ffffff; font-size: 15px; padding-left: 1; padding-right: 1;">Leaderboard</button>
                        </div>
               <!-- The Modal -->
                            <div class="modal fade" id="logout">
                                    <div class="modal-dialog">
                                        <div class="modal-content">

                                            <!-- Modal Header -->
                                            <div class="modal-header">
                                            <h4 class="modal-title" style="color: black;">Are you sure you want to logout?</h4>
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            </div>

                                            <!-- Modal body -->
                                            <div class="modal-body">
                                            <p style="color: black;">Logging out will cause termination of your game and your score till this moment will be counted as your Final Score.
                                            </div>

                                            <!-- Modal footer -->
                                            <div class="modal-footer">
                                            <button type="button" class="btn btn-danger" onclick="location.href='{% url 'logout' %}'" data-dismiss="modal">Log Out</button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                     <div class="col-lg-3 mt-1" style="display: flex; justify-content: center; align-items: center;">
                                <button class="btn btn-danger btn-block" type="button" data-toggle="modal" data-target="#logout"  style="font-size: 14px; padding-left: 0; padding-right: 0;">Log Out</button>
                            </div>
                        <div class="col-lg-3 mt-1" style=" height: 6vh; display: flex; justify-content: center;align-items: center;">
                            <img src="{% static 'img/IEEE_logo.png' %}" style="height: 5vh;">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row middle">
                        <div class="tableHeadDiv">
                            <table rules=none class="table table-fixed tableHead">
                                <thead>
                                    <tr class="table-active" style="height: 7vh;">
                                        <th class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg 3" style="text-align: center; padding-left: 2vw;">SR. NO.</div>
                                                <div class="col-lg 9" style="text-align: center; padding-right: 3.5vw;">TIME</div>
                                            </div>
                                        </th>
                                        <th class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg 9" style="text-align: center; padding-left: 1vw;">STATUS</div>
                                                <div class="col-lg 3" style="text-align: center;"></div>
                                            </div>
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="tableBodyDiv">
                            <table rules=none class="table table-fixed tableBody">
                                <tbody>
                                {% for submission in allSubmission %}
                                <tr scope="row">
                                        <td class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg-6" style="text-align: center;"><h5 style="padding-top: 0.6vh;">{{forloop.counter}}</h5></div>
                                                <div class="col-lg-6" style="text-align: center;">
                                                    <div id="textareaStyle">
                                                        <textarea disabled class="form-control" style="width: 15vw; height: 4.5vh; resize: none;">{{submission.subTime}}</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg-9" style="text-align: center;">
                                                    <div class="progress position-relative" id="progressStyle">
                                                        <div class="progress-bar" role="progressbar" style="width: {{ submission.TestCasesPercentage }}%; background-color:rgba(14, 127, 161);" aria-valuenow="{{ submission.TestCasesPercentage }}" aria-valuemin="0" aria-valuemax="100"></div>
                                                        <p class="justify-content-center d-flex position-absolute w-100" style="margin-top: 0.6vh; color: #000"><b>{{ submission.TestCasesPercentage }}%</b></p>
                                                    </div>
                                                </div>
                                                <div class="col-lg-3">
                                                    <div style="margin-left: -5vw;">
                                                        <a href="{%  url 'view_sub' qno=qn _id=submission.id %}"><button type="submit"  style="background-color:rgba(52, 162, 196, 0.65); color:#BBC7CE; border:none; width:8vw; height: 5vh; font-size: 17px; border-radius: 5px;">VIEW</button></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                {% endfor %}

                                </tbody>
                            </table>
                        </div>
                </div>
            <div class="row" style="background-color: #000">
                <div class="col-lg-12" style="font-size: 18px; border: 2px solid black;height:7vh;display: flex;justify-content: center;align-items: center;color:#ffffff;">
                    &copy PICT IEEE STUDENT BRANCH
                </div>
            </div>
        </div>
     <script>
        var countDownDate = new Date().getTime();
            var x = setInterval(function () {
                var now = new Date().getTime();
                var remTime = countDownDate + {{ time }}*1000 - now;
                var hours = Math.floor((remTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                var seconds = Math.floor((remTime / 1000) % 60);
                var minutes = Math.floor((remTime / 1000 / 60) % 60);
                if ((minutes > 0) || (seconds > 0) || (hours > 0)) {
                    if (minutes < 10) {
                        document.getElementById("min").innerHTML = "0" + minutes;
                    }
                    else {
                        document.getElementById("min").innerHTML = minutes;
                    }
                    if (seconds < 10) {
                        document.getElementById("sec").innerHTML = "0" + seconds;
                    }
                    else {
                        document.getElementById("sec").innerHTML = seconds;
                    }
                    if (hours < 10) {
                        document.getElementById("hour").innerHTML = "0" + hours;
                    }
                    else {
                        document.getElementById("hour").innerHTML = hours;
                    }
                }
                else if (minutes == 0 && seconds == 0 && hours==0) {
                    document.getElementById("min").innerHTML = "0" + "0";
                    document.getElementById("sec").innerHTML = "0" + "0";
                    document.getElementById("hour").innerHTML = "0" + "0";
                    document.getElementById("min").style.color = "#F32013";
                    document.getElementById("sec").style.color = "#F32013";
                    document.getElementById("hour").style.color = "#F32013";
                     location.href='{% url 'logout' %}';
                }
            }, 1000);
    </script>
    </body>
</html>
    </body>
</html>
